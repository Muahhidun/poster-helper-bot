# PLAN.md ‚Äî –ó–∞–∫—Ä—ã—Ç–∏–µ –¥–Ω—è: Wizard –Ω–∞ —Å–∞–π—Ç–µ

> –≠—Ç–æ—Ç —Ñ–∞–π–ª –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –µ–¥–∏–Ω–æ–≥–æ flow "–ó–∞–∫—Ä—ã—Ç–∏–µ –¥–Ω—è" –Ω–∞ —Å–∞–π—Ç–µ.
> –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –±–∏–∑–Ω–µ—Å-—Ñ–ª–æ—É ‚Äî —Å–º. **CLAUDE.md** ‚Üí "–ë–∏–∑–Ω–µ—Å-—Ñ–ª–æ—É: –ó–∞–∫—Ä—ã—Ç–∏–µ –¥–Ω—è"

## –¶–µ–ª—å

–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–∫—Ä—ã—Ç–∏—è –¥–Ω—è –Ω–∞ —Å–∞–π—Ç, –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä—É—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è. –¢—Ä–∏ –∫–ª—é—á–µ–≤—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–∞:
1. **–ê–¥–º–∏–Ω –ö–∞—Ñ–µ** ‚Äî –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ö–∞—Ñ–µ —á–µ—Ä–µ–∑ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É (`/cafe/{token}/shift-closing`, —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
2. **–ö–∞—Å—Å–∏—Ä –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –æ—Ç–¥–µ–ª–∞** ‚Äî –≤–≤–æ–¥–∏—Ç –∑–∞—Ä–ø–ª–∞—Ç—ã –∏ 5 –∑–Ω–∞—á–µ–Ω–∏–π —á–µ—Ä–µ–∑ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É (`/cashier/{token}/shift-closing`, **–ù–û–í–û–ï**)
3. **–í–ª–∞–¥–µ–ª–µ—Ü** ‚Äî –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ—Ç –æ–±–æ–∏—Ö, –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –¥–µ–Ω—å —á–µ—Ä–µ–∑ Mini App + –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã

---

## –¢–ï–ö–£–©–ê–Ø –ó–ê–î–ê–ß–ê: –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ö–∞—Å—Å–∏—Ä–∞ + –ê–≤—Ç–æ-–ø–µ—Ä–µ–≤–æ–¥—ã

### –û–±–∑–æ—Ä

–°–æ–∑–¥–∞—ë–º –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–ª—è –ö–∞—Å—Å–∏—Ä–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –æ—Ç–¥–µ–ª–∞ –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω—É –ö–∞—Ñ–µ (`shift_closing_cafe.html`). –ö–∞—Å—Å–∏—Ä –¥–µ–ª–∞–µ—Ç –¥–≤–µ –≤–µ—â–∏:
1. –í–≤–æ–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –∑–∞—Ä–ø–ª–∞—Ç ‚Üí –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç ‚Üí —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ Poster
2. –í–≤–æ–¥–∏—Ç 5 –∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è —Å–º–µ–Ω—ã ‚Üí –¥–∞–Ω–Ω—ã–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è —É –≤–ª–∞–¥–µ–ª—å—Ü–∞

–ü–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è —Å–º–µ–Ω—ã –æ–±–æ–∏—Ö –æ—Ç–¥–µ–ª–æ–≤ ‚Äî –∞–≤—Ç–æ-–ø–µ—Ä–µ–≤–æ–¥—ã –æ–¥–Ω–æ–π –∫–Ω–æ–ø–∫–æ–π.

---

### –®–∞–≥ 1: –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ö–∞—Å—Å–∏—Ä–∞ ‚Äî –ó–∞—Ä–ø–ª–∞—Ç—ã

**URL:** `/cashier/{token}/shift-closing`
**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è:** Plain HTML + vanilla JS (–∫–∞–∫ `shift_closing_cafe.html`)

**–≠–∫—Ä–∞–Ω 1 ‚Äî –í–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∑–∞—Ä–ø–ª–∞—Ç:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –û—Å–Ω–æ–≤–Ω–æ–π –æ—Ç–¥–µ–ª ‚Äî –ó–∞–∫—Ä—ã—Ç–∏–µ     ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ –ö–∞—Å—Å–∏—Ä—ã ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ  [2 –∫–∞—Å—Å–∏—Ä–∞] [3 –∫–∞—Å—Å–∏—Ä–∞]‚îÇ    ‚îÇ
‚îÇ  ‚îÇ                         ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  –ö–∞—Å—Å–∏—Ä 1: [–ú–µ—Ä—É–µ—Ä—Ç   ]‚îÇ    ‚îÇ ‚Üê –∞–≤—Ç–æ–ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—á–µ—Ä–∞—à–Ω–∏—Ö
‚îÇ  ‚îÇ  –ö–∞—Å—Å–∏—Ä 2: [–ë–∞—Ç–∏–º–∞     ]‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  (–ö–∞—Å—Å–∏—Ä 3: [        ] )‚îÇ    ‚îÇ ‚Üê –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –≤—ã–±–æ—Ä–µ 3
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ –ü–æ–º–æ—â–Ω–∏–∫ –¥–æ–Ω–µ—Ä—â–∏–∫–∞ ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ  –í—ã—à–µ–ª –Ω–∞ —Å–º–µ–Ω—É:        ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  [10:00] [12:00] [14:00]‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ –î–æ–Ω–µ—Ä—â–∏–∫ –∏ –ø–æ–º–æ—â–Ω–∏–∫ ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ  –î–æ–Ω–µ—Ä—â–∏–∫:  [–ë–µ–∫–∞      ]‚îÇ    ‚îÇ ‚Üê –∞–≤—Ç–æ–ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—á–µ—Ä–∞—à–Ω–∏—Ö
‚îÇ  ‚îÇ  –ü–æ–º–æ—â–Ω–∏–∫:  [–°–µ—Ä–∂–∞–Ω    ]‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ         [ –î–∞–ª–µ–µ ‚Üí ]             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–≠–∫—Ä–∞–Ω 2 ‚Äî –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞—Ä–ø–ª–∞—Ç (–ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è "–î–∞–ª–µ–µ"):**

–ë—ç–∫–µ–Ω–¥ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∑–∞—Ä–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ `cashier_salary.py` –∏ `doner_salary.py`:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –ó–∞—Ä–ø–ª–∞—Ç—ã –∑–∞ 17.02.2026       ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ  –ö–∞—Å—Å–∏—Ä –ú–µ—Ä—É–µ—Ä—Ç      12 000 ‚Ç∏  ‚îÇ
‚îÇ  –ö–∞—Å—Å–∏—Ä –ë–∞—Ç–∏–º–∞        12 000 ‚Ç∏  ‚îÇ
‚îÇ  –ü–æ–º–æ—â–Ω–∏–∫ –°–µ—Ä–∂–∞–Ω       9 000 ‚Ç∏  ‚îÇ
‚îÇ  –î–æ–Ω–µ—Ä—â–∏–∫ –ë–µ–∫–∞        11 000 ‚Ç∏  ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ    ‚îÇ
‚îÇ  –ò—Ç–æ–≥–æ:               44 000 ‚Ç∏  ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ  [ ‚Üê –ù–∞–∑–∞–¥ ]  [ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å ]  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å":**
- API –≤—ã–∑—ã–≤–∞–µ—Ç `CashierSalaryCalculator.create_salary_transactions()` –∏ `DonerSalaryCalculator.create_salary_transaction()`
- –°–æ–∑–¥–∞—é—Ç—Å—è 4-5 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ Poster (–∫–∞—Ç–µ–≥–æ—Ä–∏—è "–ö–∞—Å—Å–∏—Ä—ã" ID=16, "–î–æ–Ω–µ—Ä—â–∏–∫" ID=19, —Å—á—ë—Ç "–û—Å—Ç–∞–≤–∏–ª –≤ –∫–∞—Å—Å–µ" ID=4)
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∑–µ–ª—ë–Ω–∞—è –≥–∞–ª–æ—á–∫–∞ "–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω—ã"
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –∫ –®–∞–≥—É 2

---

### –®–∞–≥ 2: –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ö–∞—Å—Å–∏—Ä–∞ ‚Äî 5 –∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è

**–≠–∫—Ä–∞–Ω 3 (–ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞—Ä–ø–ª–∞—Ç):**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –î–∞–Ω–Ω—ã–µ –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è —Å–º–µ–Ω—ã     ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ –ë–µ–∑–Ω–∞–ª ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ  Wolt:    [          0 ]‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  Halyk:   [          0 ]‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ –ù–∞–ª–∏—á–Ω—ã–µ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ  –ë—É–º–∞–∂–Ω—ã–µ: [         0 ]‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  –ú–µ–ª–æ—á—å:   [         0 ]‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ –†–∞—Å—Ö–æ–¥—ã ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ  –†–∞—Å—Ö–æ–¥—ã —Å –∫–∞—Å—Å—ã: [   0 ]‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ         [ –û—Ç–ø—Ä–∞–≤–∏—Ç—å ]           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å":**
- –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É `cashier_shift_data`
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∑–µ–ª—ë–Ω–∞—è –≥–∞–ª–æ—á–∫–∞ "–î–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã"
- –£ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∑–∞–∫—Ä—ã—Ç–∏—è —Å–º–µ–Ω—ã —ç—Ç–∏ 5 –ø–æ–ª–µ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ç—è–≥–∏–≤–∞—é—Ç—Å—è

---

### –®–∞–≥ 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–ª–∞–¥–µ–ª—å—Ü–µ–º

**–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞ (ShiftClosing.tsx / Mini App):**

–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ poster-data endpoint –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `cashier_shift_data` –∑–∞ —Å–µ–≥–æ–¥–Ω—è:
- –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –µ—Å—Ç—å ‚Üí –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω—è–µ—Ç: `wolt`, `halyk`, `cash_bills`, `cash_coins`, `expenses`
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä: "–î–∞–Ω–Ω—ã–µ –æ—Ç –∫–∞—Å—Å–∏—Ä–∞" (–∑–µ–ª—ë–Ω—ã–π badge)
- `kaspi_cafe` —É–∂–µ –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç—Å—è –∏–∑ –∑–∞–∫—Ä—ã—Ç–∏—è –ö–∞—Ñ–µ (—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ª–æ–≥–∏–∫–∞ —á–µ—Ä–µ–∑ `cafe_kaspi_pizzburg`)

**–ò—Ç–æ–≥–æ –≤–ª–∞–¥–µ–ª—å—Ü—É –æ—Å—Ç–∞—ë—Ç—Å—è –≤–≤–µ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ:**
- `kaspi` (Kaspi –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –æ—Ç–¥–µ–ª–∞ ‚Äî –∏–∑ –±–∞–Ω–∫–æ–≤—Å–∫–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)

–í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —É–∂–µ –Ω–∞ –º–µ—Å—Ç–µ.

---

### –®–∞–≥ 4: –ê–≤—Ç–æ-–ø–µ—Ä–µ–≤–æ–¥—ã –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è —Å–º–µ–Ω—ã

**–¢—Ä–∏–≥–≥–µ—Ä:** –ù–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ "–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á—ë—Ç" (—É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –∫–Ω–æ–ø–∫–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö –∑–∞–∫—Ä—ã—Ç–∏—è —Å–º–µ–Ω—ã –ö–∞—Ñ–µ –∏ –û—Å–Ω–æ–≤–Ω–æ–≥–æ –æ—Ç–¥–µ–ª–∞).

**–õ–æ–≥–∏–∫–∞:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á—ë—Ç"
2. –û—Ç—á—ë—Ç –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –≤ –±—É—Ñ–µ—Ä (–∫–∞–∫ —Å–µ–π—á–∞—Å)
3. **–ü–ª—é—Å** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –ø–µ—Ä–µ–≤–æ–¥—ã –≤ Poster
4. –ö–Ω–æ–ø–∫–∞ –º–µ–Ω—è–µ—Ç —Ç–µ–∫—Å—Ç: "–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏ —Å–æ–∑–¥–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã" ‚Üí "–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á—ë—Ç (–ø–µ—Ä–µ–≤–æ–¥—ã —Å–æ–∑–¥–∞–Ω—ã)"

**–ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–µ–π:**
- –í —Ç–∞–±–ª–∏—Ü–µ `shift_closings` –Ω–æ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: `transfers_created BOOLEAN DEFAULT FALSE`
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ ‚Üí `transfers_created = true`
- –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –Ω–∞–∂–∞—Ç–∏–∏ ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–ª–∞–≥: –µ—Å–ª–∏ `true` ‚Üí —Ç–æ–ª—å–∫–æ –∫–æ–ø–∏—Ä—É–µ–º –æ—Ç—á—ë—Ç, –ø–µ—Ä–µ–≤–æ–¥—ã –ù–ï —Å–æ–∑–¥–∞—ë–º
- –í –æ—Ç—á—ë—Ç–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–∞ "–ü–µ—Ä–µ–≤–æ–¥—ã —Å–æ–∑–¥–∞–Ω—ã" –∏–ª–∏ "–ü–µ—Ä–µ–≤–æ–¥—ã: —É–∂–µ —Å–æ–∑–¥–∞–Ω—ã —Ä–∞–Ω–µ–µ"

**–ü–µ—Ä–µ–≤–æ–¥—ã –ö–∞—Ñ–µ** (–ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å" –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ö–∞—Ñ–µ):

| –ü–µ—Ä–µ–≤–æ–¥ | –°–æ —Å—á—ë—Ç–∞ | –ù–∞ —Å—á—ë—Ç | –°—É–º–º–∞ | –ò—Å—Ç–æ—á–Ω–∏–∫ |
|---------|----------|---------|-------|----------|
| –ò–Ω–∫–∞—Å—Å–∞—Ü–∏—è –ö–∞—Ñ–µ | –ò–Ω–∫–∞—Å—Å–∞—Ü–∏—è | –û—Å—Ç–∞–≤–∏–ª –≤ –∫–∞—Å—Å–µ (–ö–∞—Ñ–µ) | `cafe_collection` | –†–∞—Å—Å—á–∏—Ç–∞–Ω–æ –≤ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ö–∞—Ñ–µ |
| Wolt –ö–∞—Ñ–µ | –ö–∞—Å–ø–∏–π –ü–µ–π | –í–æ–ª—å—Ç (–ö–∞—Ñ–µ) | `cafe_wolt` | –í–≤–µ–¥–µ–Ω–æ –∞–¥–º–∏–Ω–æ–º –ö–∞—Ñ–µ –Ω–∞ —Å–∞–π—Ç–µ |

**–ü–µ—Ä–µ–≤–æ–¥—ã –û—Å–Ω–æ–≤–Ω–æ–≥–æ** (–ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å" –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞):

| –ü–µ—Ä–µ–≤–æ–¥ | –°–æ —Å—á—ë—Ç–∞ | –ù–∞ —Å—á—ë—Ç | –°—É–º–º–∞ | –ò—Å—Ç–æ—á–Ω–∏–∫ |
|---------|----------|---------|-------|----------|
| –ò–Ω–∫–∞—Å—Å–∞—Ü–∏—è | –ò–Ω–∫–∞—Å—Å–∞—Ü–∏—è | –û—Å—Ç–∞–≤–∏–ª –≤ –∫–∞—Å—Å–µ (–û—Å–Ω–æ–≤–Ω–æ–π) | `collection` | –†–∞—Å—Å—á–∏—Ç–∞–Ω–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞ |
| Wolt | –ö–∞—Å–ø–∏–π –ü–µ–π | –í–æ–ª—å—Ç (–û—Å–Ω–æ–≤–Ω–æ–π) | `wolt` | –í–≤–µ–¥–µ–Ω–æ –∫–∞—Å—Å–∏—Ä–æ–º (–®–∞–≥ 2) |
| Halyk | –ö–∞—Å–ø–∏–π –ü–µ–π | Halyk (–û—Å–Ω–æ–≤–Ω–æ–π) | `halyk` | –í–≤–µ–¥–µ–Ω–æ –∫–∞—Å—Å–∏—Ä–æ–º (–®–∞–≥ 2) |

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á—ë—Ç" ‚Üí `POST /api/.../transfers` (–µ—Å–ª–∏ `transfers_created == false`)
- –ö–∞–∂–¥—ã–π –ø–µ—Ä–µ–≤–æ–¥ ‚Üí `finance.createTransaction` —Å `type=2` (transfer)
- –û—Ç–≤–µ—Ç API —Å–æ–¥–µ—Ä–∂–∏—Ç ID —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ `shift_closings`
- UI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫—Ä–∞—Ç–∫–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "–û—Ç—á—ë—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω, 3 –ø–µ—Ä–µ–≤–æ–¥–∞ —Å–æ–∑–¥–∞–Ω—ã"

> **–í–ê–ñ–ù–û:** –ù—É–∂–Ω–æ —É—Ç–æ—á–Ω–∏—Ç—å ID —Å—á–µ—Ç–æ–≤ "–ò–Ω–∫–∞—Å—Å–∞—Ü–∏—è" –∏ "–í–æ–ª—å—Ç" –≤ Poster. –ü–æ–ª—É—á–∏—Ç—å —á–µ—Ä–µ–∑ `finance.getAccounts`.

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

#### –¢–∞–±–ª–∏—Ü–∞ `cashier_access_tokens` (–Ω–æ–≤–∞—è)
```sql
CREATE TABLE cashier_access_tokens (
    id INTEGER PRIMARY KEY,
    token TEXT UNIQUE NOT NULL,
    telegram_user_id BIGINT NOT NULL,
    poster_account_id INTEGER NOT NULL,  -- ID –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ (is_primary=true)
    label TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (telegram_user_id) REFERENCES users(telegram_user_id)
);
```
–ü–∞—Ç—Ç–µ—Ä–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–≤—Ç–æ—Ä—è–µ—Ç `cafe_access_tokens`, –Ω–æ `poster_account_id` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ **–æ—Å–Ω–æ–≤–Ω–æ–π** –∞–∫–∫–∞—É–Ω—Ç (Pizzburg), –∞ –Ω–µ –Ω–∞ –ö–∞—Ñ–µ.

#### –¢–∞–±–ª–∏—Ü–∞ `cashier_shift_data` (–Ω–æ–≤–∞—è)
```sql
CREATE TABLE cashier_shift_data (
    id INTEGER PRIMARY KEY,
    telegram_user_id BIGINT NOT NULL,
    date TEXT NOT NULL,                    -- YYYY-MM-DD
    -- –®–∞–≥ 1: –ó–∞—Ä–ø–ª–∞—Ç—ã
    cashier_count INTEGER,                 -- 2 –∏–ª–∏ 3
    cashier_names TEXT,                    -- JSON array: ["–ú–µ—Ä—É–µ—Ä—Ç", "–ë–∞—Ç–∏–º–∞"]
    assistant_start_time TEXT,             -- "10:00" | "12:00" | "14:00"
    doner_name TEXT,
    assistant_name TEXT,
    salaries_data TEXT,                    -- JSON: —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–µ –∑–∞—Ä–ø–ª–∞—Ç—ã
    salaries_created BOOLEAN DEFAULT FALSE,-- —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω—ã?
    -- –®–∞–≥ 2: 5 –∑–Ω–∞—á–µ–Ω–∏–π
    wolt REAL DEFAULT 0,
    halyk REAL DEFAULT 0,
    cash_bills REAL DEFAULT 0,
    cash_coins REAL DEFAULT 0,
    expenses REAL DEFAULT 0,
    shift_data_submitted BOOLEAN DEFAULT FALSE,  -- –¥–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã?
    -- –ú–µ—Ç–∞
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(telegram_user_id, date)
);
```

### 2. –ú–µ—Ç–æ–¥—ã database.py (–Ω–æ–≤—ã–µ)

```python
# –¢–æ–∫–µ–Ω—ã
create_cashier_token(telegram_user_id, poster_account_id, label) -> str
get_cashier_token(token) -> Optional[Dict]  # –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç user_id + poster credentials
list_cashier_tokens(telegram_user_id) -> list
delete_cashier_token(token_id, telegram_user_id) -> bool

# –î–∞–Ω–Ω—ã–µ –∫–∞—Å—Å–∏—Ä–∞
save_cashier_shift_data(telegram_user_id, date, data) -> bool  # upsert
get_cashier_shift_data(telegram_user_id, date) -> Optional[Dict]
get_cashier_last_employees(telegram_user_id) -> Optional[Dict]  # –≤—á–µ—Ä–∞—à–Ω–∏–µ –∏–º–µ–Ω–∞
```

### 3. –ö–æ–º–∞–Ω–¥–∞ –±–æ—Ç–∞ `/cashier_token`

–ü–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–ø–∏—Ä—É–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω `/cafe_token`:
```
/cashier_token list              ‚Äî —Å–ø–∏—Å–æ–∫ —Ç–æ–∫–µ–Ω–æ–≤
/cashier_token create [–º–µ—Ç–∫–∞]    ‚Äî —Å–æ–∑–¥–∞—Ç—å —Ç–æ–∫–µ–Ω (–ø—Ä–∏–≤—è–∑–∫–∞ –∫ PRIMARY –∞–∫–∫–∞—É–Ω—Ç—É)
/cashier_token delete <id>       ‚Äî —É–¥–∞–ª–∏—Ç—å —Ç–æ–∫–µ–Ω
```

–†–∞–∑–Ω–∏—Ü–∞ —Å `/cafe_token`:
- –ò—â–µ—Ç **primary** –∞–∫–∫–∞—É–Ω—Ç –≤–º–µ—Å—Ç–æ non-primary
- URL: `/cashier/{token}/shift-closing`

### 4. Flask routes (web_app.py)

#### –°—Ç—Ä–∞–Ω–∏—Ü–∞
```
GET /cashier/<token>/shift-closing
    ‚Üí render_template('shift_closing_cashier.html', token=token, account_name=...)
```

#### API –¥–ª—è –∑–∞—Ä–ø–ª–∞—Ç
```
POST /api/cashier/<token>/salaries/calculate
    Body: { cashier_count: 2|3, assistant_start_time: "10:00"|"12:00"|"14:00" }
    ‚Üí –í—ã–∑—ã–≤–∞–µ—Ç CashierSalaryCalculator.get_total_sales() + calculate_salary()
    ‚Üí –í—ã–∑—ã–≤–∞–µ—Ç DonerSalaryCalculator.get_doner_sales_count() + calculate_salary()
    ‚Üí –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: { cashier_salary: 12000, doner_salary: 11000, assistant_salary: 9000 }
    (–ù–ï —Å–æ–∑–¥–∞—ë—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π, —Ç–æ–ª—å–∫–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç)

POST /api/cashier/<token>/salaries/create
    Body: {
        cashier_count: 2,
        cashier_names: ["–ú–µ—Ä—É–µ—Ä—Ç", "–ë–∞—Ç–∏–º–∞"],
        assistant_start_time: "12:00",
        doner_name: "–ë–µ–∫–∞",
        assistant_name: "–°–µ—Ä–∂–∞–Ω"
    }
    ‚Üí –í—ã–∑—ã–≤–∞–µ—Ç create_salary_transactions() –∏ create_salary_transaction()
    ‚Üí –°–æ–∑–¥–∞—ë—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ Poster
    ‚Üí –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ cashier_shift_data (salaries_created = true)
    ‚Üí –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: { success: true, salaries: [...] }
```

#### API –¥–ª—è –¥–∞–Ω–Ω—ã—Ö —Å–º–µ–Ω—ã
```
POST /api/cashier/<token>/shift-data/save
    Body: { wolt: 45000, halyk: 120000, cash_bills: 890000, cash_coins: 15000, expenses: 35000 }
    ‚Üí –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ cashier_shift_data (shift_data_submitted = true)
    ‚Üí –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: { success: true }

GET /api/cashier/<token>/employees/last
    ‚Üí –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—á–µ—Ä–∞—à–Ω–∏–µ –∏–º–µ–Ω–∞ –∏–∑ cashier_shift_data –∏–ª–∏ employees —Ç–∞–±–ª–∏—Ü—ã
    ‚Üí { cashier_names: ["–ú–µ—Ä—É–µ—Ä—Ç", "–ë–∞—Ç–∏–º–∞"], doner_name: "–ë–µ–∫–∞", assistant_name: "–°–µ—Ä–∂–∞–Ω",
        cashier_count: 2, assistant_start_time: "12:00" }
```

### 5. HTML-—à–∞–±–ª–æ–Ω `shift_closing_cashier.html`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ (–ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ —Å `shift_closing_cafe.html`):**

```html
<!-- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π JS -->
<script>
const TOKEN = '{{ token }}';
const API_BASE = '/api/cashier/' + TOKEN;

let currentStep = 1;  // 1=–∑–∞—Ä–ø–ª–∞—Ç—ã, 2=–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ, 3=–¥–∞–Ω–Ω—ã–µ —Å–º–µ–Ω—ã, 4=–≥–æ—Ç–æ–≤–æ

// –®–∞–≥ 1: –í–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∑–∞—Ä–ø–ª–∞—Ç
// - –ö–Ω–æ–ø–∫–∏ 2/3 –∫–∞—Å—Å–∏—Ä–∞
// - –ü–æ–ª—è –∏–º—ë–Ω —Å –∞–≤—Ç–æ–ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–æ–π
// - –ö–Ω–æ–ø–∫–∏ 10:00/12:00/14:00
// - –ö–Ω–æ–ø–∫–∞ "–î–∞–ª–µ–µ" ‚Üí POST /salaries/calculate ‚Üí –ø–æ–∫–∞–∑ –®–∞–≥–∞ 2

// –®–∞–≥ 2: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞—Ä–ø–ª–∞—Ç
// - –¢–∞–±–ª–∏—Ü–∞: –∏–º—è ‚Üí —Å—É–º–º–∞
// - –ö–Ω–æ–ø–∫–∞ "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å" ‚Üí POST /salaries/create ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –∫ –®–∞–≥—É 3
// - –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" ‚Üí –≤–æ–∑–≤—Ä–∞—Ç –∫ –®–∞–≥—É 1

// –®–∞–≥ 3: 5 –ø–æ–ª–µ–π –≤–≤–æ–¥–∞
// - Wolt, Halyk, –ë—É–º–∞–∂–Ω—ã–µ, –ú–µ–ª–æ—á—å, –†–∞—Å—Ö–æ–¥—ã
// - –ö–Ω–æ–ø–∫–∞ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å" ‚Üí POST /shift-data/save ‚Üí –®–∞–≥ 4

// –®–∞–≥ 4: –ì–æ—Ç–æ–≤–æ
// - "–î–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã. –°–ø–∞—Å–∏–±–æ!"
</script>
```

**UI —Å—Ç–∏–ª–∏:** –ü–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–ø–∏—Ä—É–µ–º –∏–∑ `shift_closing_cafe.html` (iOS-style, mobile-optimized).

### 6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–ª–∞–¥–µ–ª—å—Ü–µ–º

**–í `web_app.py`, endpoint `GET /api/shift-closing/poster-data`:**

```python
# –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ª–æ–≥–∏–∫–∞ (—É–∂–µ –µ—Å—Ç—å):
# - cafe_kaspi_pizzburg –∏–∑ shift_closings –ö–∞—Ñ–µ

# –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞:
# –ü—Ä–æ–≤–µ—Ä—è–µ–º cashier_shift_data –∑–∞ —Å–µ–≥–æ–¥–Ω—è
cashier_data = db.get_cashier_shift_data(user_id, date_str)
if cashier_data and cashier_data.get('shift_data_submitted'):
    data['cashier_wolt'] = cashier_data.get('wolt', 0)
    data['cashier_halyk'] = cashier_data.get('halyk', 0)
    data['cashier_cash_bills'] = cashier_data.get('cash_bills', 0)
    data['cashier_cash_coins'] = cashier_data.get('cash_coins', 0)
    data['cashier_expenses'] = cashier_data.get('expenses', 0)
    data['cashier_data_submitted'] = True
```

**–í `ShiftClosing.tsx` (Mini App):**

```typescript
// –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ posterData, –µ—Å–ª–∏ cashier_data_submitted:
if (posterData.cashier_data_submitted) {
    setInputs(prev => ({
        ...prev,
        wolt: String(posterData.cashier_wolt || ''),
        halyk: String(posterData.cashier_halyk || ''),
        cashBills: String(posterData.cashier_cash_bills || ''),
        cashCoins: String(posterData.cashier_cash_coins || ''),
        expenses: String(posterData.cashier_expenses || ''),
    }))
    // –ü–æ–∫–∞–∑–∞—Ç—å badge "–î–∞–Ω–Ω—ã–µ –æ—Ç –∫–∞—Å—Å–∏—Ä–∞"
}
```

### 7. –ê–≤—Ç–æ-–ø–µ—Ä–µ–≤–æ–¥—ã (–ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –∫–Ω–æ–ø–∫–µ "–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á—ë—Ç")

#### Endpoint –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤
```
POST /api/shift-closing/transfers
    ‚Üí –ß–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ shift_closings –∑–∞ –¥–∞—Ç—É
    ‚Üí –ü—Ä–æ–≤–µ—Ä—è–µ—Ç transfers_created: –µ—Å–ª–∏ true ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç { already_created: true }
    ‚Üí –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (collection, wolt, halyk)
    ‚Üí –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞: poster_client.create_transaction(type=2, ...)
    ‚Üí –°—Ç–∞–≤–∏—Ç transfers_created = true
    ‚Üí –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: { success: true, created_count: 3 }

POST /api/cafe/<token>/transfers
    ‚Üí –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ, –Ω–æ –¥–ª—è –ö–∞—Ñ–µ (2 –ø–µ—Ä–µ–≤–æ–¥–∞: –∏–Ω–∫–∞—Å—Å–∞—Ü–∏—è + wolt)
```

#### –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î (shift_closings)
```sql
ALTER TABLE shift_closings ADD COLUMN transfers_created BOOLEAN DEFAULT FALSE;
```

#### –ü–æ–≤–µ–¥–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ "–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á—ë—Ç"
```
–ü–µ—Ä–≤–æ–µ –Ω–∞–∂–∞—Ç–∏–µ (transfers_created = false):
  1. –ö–æ–ø–∏—Ä—É–µ—Ç –æ—Ç—á—ë—Ç –≤ –±—É—Ñ–µ—Ä
  2. POST /transfers ‚Üí —Å–æ–∑–¥–∞—ë—Ç –ø–µ—Ä–µ–≤–æ–¥—ã –≤ Poster
  3. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "–û—Ç—á—ë—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω, 3 –ø–µ—Ä–µ–≤–æ–¥–∞ —Å–æ–∑–¥–∞–Ω—ã"
  4. –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏: "–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á—ë—Ç (–ø–µ—Ä–µ–≤–æ–¥—ã —Å–æ–∑–¥–∞–Ω—ã ‚úì)"

–ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ (transfers_created = true):
  1. –ö–æ–ø–∏—Ä—É–µ—Ç –æ—Ç—á—ë—Ç –≤ –±—É—Ñ–µ—Ä
  2. –ù–ï —Å–æ–∑–¥–∞—ë—Ç –ø–µ—Ä–µ–≤–æ–¥—ã
  3. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "–û—Ç—á—ë—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω"
```

---

## –ü–æ—Ä—è–¥–æ–∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –§–∞–∑–∞ 1A: –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ö–∞—Å—Å–∏—Ä–∞ ‚Äî –ì–û–¢–û–í–û ‚úÖ
1. ~~–¢–∞–±–ª–∏—Ü—ã `cashier_access_tokens` + `cashier_shift_data` –≤ database.py~~
2. ~~CRUD-–º–µ—Ç–æ–¥—ã –¥–ª—è —Ç–æ–∫–µ–Ω–æ–≤ –∏ –¥–∞–Ω–Ω—ã—Ö –∫–∞—Å—Å–∏—Ä–∞ –≤ database.py~~
3. ~~–ö–æ–º–∞–Ω–¥–∞ `/cashier_token` –≤ bot.py~~
4. ~~Flask routes –≤ web_app.py (6 endpoints)~~
5. ~~HTML-—à–∞–±–ª–æ–Ω `shift_closing_cashier.html`~~
6. ~~–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è: –¥–∞–Ω–Ω—ã–µ –∫–∞—Å—Å–∏—Ä–∞ ‚Üí poster-data endpoint ‚Üí ShiftClosing.tsx~~

### –§–∞–∑–∞ 1.5: –°–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å —Ä–æ–ª—è–º–∏ ‚Äî –ì–û–¢–û–í–û ‚úÖ

<details>
<summary>–î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (—Å–≤–µ—Ä–Ω—É—Ç–æ)</summary>

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- –¢–∞–±–ª–∏—Ü–∞ `web_users` —Å bcrypt —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º (`database.py:980-1009`)
- CRUD-–º–µ—Ç–æ–¥—ã: create/verify/list/delete/reset_password (`database.py:3499-3699`)
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/login` —Å Flask session (`web_app.py:78-109`, `templates/login.html`)
- Middleware `check_auth()` —Å —Ä–æ–ª—è–º–∏ owner/admin/cashier (`web_app.py:119-163`)
- URL –±–µ–∑ —Ç–æ–∫–µ–Ω–æ–≤: `/cafe/shift-closing`, `/cashier/shift-closing` (—Å—Ç–∞—Ä—ã–µ URL —Å —Ç–æ–∫–µ–Ω–∞–º–∏ ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç)
- –ö–æ–º–∞–Ω–¥–∞ –±–æ—Ç–∞ `/staff` (list/create/delete/reset) (`bot.py:1390-1515`)
- `bcrypt==4.2.0` –≤ requirements.txt
- ‚ö†Ô∏è Rate limit –Ω–∞ `/login` ‚Äî –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (–Ω–µ–∫—Ä–∏—Ç–∏—á–Ω–æ, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ —á–µ—Ä–µ–∑ Flask-Limiter)

</details>

### –§–∞–∑–∞ 1B: –ê–≤—Ç–æ-–ø–µ—Ä–µ–≤–æ–¥—ã ‚Äî –ì–û–¢–û–í–û ‚úÖ

<details>
<summary>–î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (—Å–≤–µ—Ä–Ω—É—Ç–æ)</summary>

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- `POST /api/shift-closing/transfers` ‚Äî –ø–µ—Ä–µ–≤–æ–¥—ã –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –æ—Ç–¥–µ–ª–∞ (–∏–Ω–∫–∞—Å—Å–∞—Ü–∏—è, Wolt, Halyk)
- `POST /api/cafe/transfers` ‚Äî –ø–µ—Ä–µ–≤–æ–¥—ã –ö–∞—Ñ–µ (–∏–Ω–∫–∞—Å—Å–∞—Ü–∏—è, Wolt)
- –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–µ–π: `transfers_created` —Ñ–ª–∞–≥ –≤ `shift_closings`
- –ó–∞—â–∏—Ç–∞ –æ—Ç –Ω—É–ª–µ–≤—ã—Ö —Å—É–º–º: `amount > 0` –ø—Ä–æ–≤–µ—Ä–∫–∞
- UI –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∏ –ö–∞—Ñ–µ

</details>

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–≤–Ω–µ —Ñ–∞–∑) ‚Äî –ì–û–¢–û–í–û ‚úÖ

<details>
<summary>–î–µ—Ç–∞–ª–∏ (—Å–≤–µ—Ä–Ω—É—Ç–æ)</summary>

- **Fix UNIQUE constraint** ‚Äî cafe + main shift closings –Ω–∞ –æ–¥–Ω—É –¥–∞—Ç—É (partial unique indexes)
- **–ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫–∞—Å—Å–∏—Ä–∞** –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞ (5 –ø–æ–ª–µ–π –∏–∑ `cashier_shift_data`)
- **–ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ `kaspi_cafe`** –∏–∑ –∑–∞–∫—Ä—ã—Ç–∏—è –ö–∞—Ñ–µ
- **Status badges** (–ö–∞—Å—Å–∏—Ä/–ö–∞—Ñ–µ) –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞
- **Navbar links** (–ö–∞—Å—Å–∏—Ä/–ö–∞—Ñ–µ) –≤ `base.html`
- **–§–æ–Ω–æ–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ä–∞—Å—Ö–æ–¥–æ–≤** (BackgroundScheduler, –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü)

</details>

---

### –§–∞–∑–∞ 2: –ü–æ–º–æ—â–Ω–∏–∫ –ø–æ –±–µ–∑–Ω–∞–ª—É + –ê–≤—Ç–æ-—Å–≤–µ—Ä–∫–∞ ‚Äî –¢–ï–ö–£–©–ê–Ø

#### 2A. –ü–æ–º–æ—â–Ω–∏–∫ –ø–æ —Ä–∞–∑–Ω–∏—Ü–µ –±–µ–∑–Ω–∞–ª–∞

> **–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å–º–µ–Ω—ã —á–∞—Å—Ç–æ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç —Ä–∞–∑–Ω–∏—Ü–∞ –±–µ–∑–Ω–∞–ª–∞ (—Ñ–∞–∫—Ç vs Poster). –°–µ–π—á–∞—Å –≤–ª–∞–¥–µ–ª–µ—Ü –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —á–∏—Å–ª–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "-3 500‚Ç∏") –∏ –¥–æ–ª–∂–µ–Ω –≤—Ä—É—á–Ω—É—é –ø–µ—Ä–µ–±–∏—Ä–∞—Ç—å —á–µ–∫–∏ –≤ Poster, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ –≥–¥–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –æ–ø–ª–∞—Ç—ã.
>
> **–¶–µ–ª—å:** –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —á–µ–∫–æ–≤ –∑–∞ –¥–µ–Ω—å —Å —Ä–∞–∑–±–∏–≤–∫–æ–π –ø–æ –º–µ—Ç–æ–¥—É –æ–ø–ª–∞—Ç—ã. –í–ª–∞–¥–µ–ª–µ—Ü —Å—Ä–∞–∑—É –≤–∏–¥–∏—Ç –∫–∞–∫–æ–π —á–µ–∫ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å.

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**

–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∑–∞–∫—Ä—ã—Ç–∏—è —Å–º–µ–Ω—ã, —Ä—è–¥–æ–º —Å "–†–∞–∑–Ω–∏—Ü–∞ –±–µ–∑–Ω–∞–ª: -3 500‚Ç∏", –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ "–†–∞–∑–æ–±—Ä–∞—Ç—å". –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –±–ª–æ–∫ —Å–æ —Å–ø–∏—Å–∫–æ–º —á–µ–∫–æ–≤:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –†–∞–∑–Ω–∏—Ü–∞ –±–µ–∑–Ω–∞–ª–∞: -3 500‚Ç∏    [ –†–∞–∑–æ–±—Ä–∞—Ç—å ]  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                             ‚îÇ
‚îÇ  –ß–µ–∫–∏ –∑–∞ 18.02.2026 (–≤—Å–µ–≥–æ: 87)            ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ  #1042  14:23  –î–æ–Ω–µ—Ä + –ö–æ–ª–∞     2 800‚Ç∏      ‚îÇ
‚îÇ         üí≥ –ö–∞—Ä—Ç–∞: 2 800‚Ç∏                    ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ  #1043  14:31  –ü–∏—Ü—Ü–∞ –ú–∞—Ä–≥–∞—Ä–∏—Ç–∞  3 500‚Ç∏      ‚îÇ
‚îÇ         üíµ –ù–∞–ª–∏—á–Ω—ã–µ: 3 500‚Ç∏   ‚ö†Ô∏è            ‚îÇ
‚îÇ         (Poster: –∫–∞—Ä—Ç–∞)                     ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ  #1044  14:45  2x –î–æ–Ω–µ—Ä         5 600‚Ç∏      ‚îÇ
‚îÇ         üí≥ –ö–∞—Ä—Ç–∞: 5 600‚Ç∏                    ‚îÇ
‚îÇ  ...                                        ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ –ò—Ç–æ–≥–æ –ø–æ –º–µ—Ç–æ–¥–∞–º ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  üíµ –ù–∞–ª–∏—á–Ω—ã–µ:  245 000‚Ç∏              ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  üí≥ –ö–∞—Ä—Ç–∞:     380 000‚Ç∏              ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  üéÅ –ë–æ–Ω—É—Å:      12 000‚Ç∏             ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  –í—Å–µ–≥–æ:        637 000‚Ç∏              ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö:**

API Poster: `dash.getTransactions` ‚Äî —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è `poster-data`. –ö–∞–∂–¥—ã–π —á–µ–∫ —Å–æ–¥–µ—Ä–∂–∏—Ç:
- `transaction_id` ‚Äî –Ω–æ–º–µ—Ä —á–µ–∫–∞
- `date_close_date` ‚Äî –≤—Ä–µ–º—è –∑–∞–∫—Ä—ã—Ç–∏—è
- `payed_sum` ‚Äî –æ–±—â–∞—è —Å—É–º–º–∞ (—Ç–∏–π–∏–Ω—ã)
- `payed_cash` ‚Äî –æ–ø–ª–∞—Ç–∞ –Ω–∞–ª–∏—á–Ω—ã–º–∏
- `payed_card` ‚Äî –æ–ø–ª–∞—Ç–∞ –∫–∞—Ä—Ç–æ–π

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**

1. **–ù–æ–≤—ã–π endpoint:** `GET /api/shift-closing/receipts`
   - –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –∑–∞–∫—Ä—ã—Ç—ã–µ —á–µ–∫–∏ –∏–∑ `dash.getTransactions` –∑–∞ —Å–µ–≥–æ–¥–Ω—è
   - –î–ª—è –∫–∞–∂–¥–æ–≥–æ —á–µ–∫–∞: ID, –≤—Ä–µ–º—è, —Å—É–º–º–∞, cash/card —Ä–∞–∑–±–∏–≤–∫–∞
   - –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: `dash.getTransactionProducts(id)` –¥–ª—è –Ω–∞–∑–≤–∞–Ω–∏–π —Ç–æ–≤–∞—Ä–æ–≤

2. **UI:** –ù–æ–≤—ã–π –±–ª–æ–∫ –≤ `shift_closing.html`
   - –ö–Ω–æ–ø–∫–∞ "–†–∞–∑–æ–±—Ä–∞—Ç—å" —Ä—è–¥–æ–º —Å —Ä–∞–∑–Ω–∏—Ü–µ–π –±–µ–∑–Ω–∞–ª–∞
   - –¢–∞–±–ª–∏—Ü–∞ —á–µ–∫–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏: "–í—Å–µ" / "–¢–æ–ª—å–∫–æ –Ω–∞–ª–∏—á–Ω—ã–µ" / "–¢–æ–ª—å–∫–æ –∫–∞—Ä—Ç–∞"
   - –ò—Ç–æ–≥–æ –ø–æ –º–µ—Ç–æ–¥–∞–º –æ–ø–ª–∞—Ç—ã –≤–Ω–∏–∑—É
   - –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö —á–µ–∫–æ–≤ (–≥–¥–µ –º–µ—Ç–æ–¥ –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –æ–∂–∏–¥–∞–µ–º—ã–º)

#### 2B. –ê–≤—Ç–æ-—Å–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–æ–≤

> **–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –æ–±–æ–∏—Ö –æ—Ç–¥–µ–ª–æ–≤ –≤–ª–∞–¥–µ–ª–µ—Ü –≤—Ä—É—á–Ω—É—é —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ –¥–µ–Ω—å–≥–∏ —Å —Å—É–º–º–∞–º–∏ —Å—á–µ—Ç–æ–≤ –≤ Poster. –ù—É–∂–Ω–æ –∑–∞–π—Ç–∏ –≤ Poster, –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –±–∞–ª–∞–Ω—Å "–û—Å—Ç–∞–≤–∏–ª –≤ –∫–∞—Å—Å–µ" –æ–±–æ–∏—Ö –æ—Ç–¥–µ–ª–æ–≤, Kaspi –æ–±–æ–∏—Ö, Halyk –æ—Å–Ω–æ–≤–Ω–æ–≥–æ.
>
> **–¶–µ–ª—å:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∑–∞—Ç—å –±–∞–ª–∞–Ω—Å—ã –≤—Å–µ—Ö —Å—á–µ—Ç–æ–≤ –æ–±–æ–∏—Ö –æ—Ç–¥–µ–ª–æ–≤ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ –∏ —Å—Ä–∞–≤–Ω–∏—Ç—å —Å —Ñ–∞–∫—Ç–æ–º.

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**

–ù–æ–≤—ã–π –±–ª–æ–∫ "–°–≤–µ—Ä–∫–∞" –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∑–∞–∫—Ä—ã—Ç–∏—è —Å–º–µ–Ω—ã (–ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ —Ä–∞—Å—á—ë—Ç–∞):

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –°–í–ï–†–ö–ê –°–ß–ï–¢–û–í                               ‚îÇ
‚îÇ                                              ‚îÇ
‚îÇ  –°—á—ë—Ç          ‚îÇ Pizzburg ‚îÇ Cafe  ‚îÇ –ò—Ç–æ–≥–æ    ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ  –ù–∞–ª–∏—á–Ω—ã–µ      ‚îÇ 185 000  ‚îÇ 45 000‚îÇ 230 000  ‚îÇ
‚îÇ  Kaspi         ‚îÇ 420 000  ‚îÇ 85 000‚îÇ 505 000  ‚îÇ
‚îÇ  Halyk         ‚îÇ 120 000  ‚îÇ   ‚Äî   ‚îÇ 120 000  ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ  –ò—Ç–æ–≥–æ Poster  ‚îÇ 725 000  ‚îÇ130 000‚îÇ 855 000  ‚îÇ
‚îÇ                                              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ –§–∞–∫—Ç (–∏–∑ –∑–∞–∫—Ä—ã—Ç–∏–π) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  –ù–∞–ª–∏—á–Ω—ã–µ:  228 500‚Ç∏   ‚úÖ (-1 500‚Ç∏)  ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  Kaspi:     505 000‚Ç∏   ‚úÖ              ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  Halyk:     120 000‚Ç∏   ‚úÖ              ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                              ‚îÇ
‚îÇ  –í—Å—ë —Å—Ö–æ–¥–∏—Ç—Å—è ‚úÖ (–º–∞–∫—Å. —Ä–∞–∑–Ω–∏—Ü–∞: 1 500‚Ç∏)    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö:**

- API Poster: `finance.getAccounts` ‚Äî –±–∞–ª–∞–Ω—Å –∫–∞–∂–¥–æ–≥–æ —Å—á—ë—Ç–∞ (—É–∂–µ –µ—Å—Ç—å –º–µ—Ç–æ–¥ `get_accounts()` –≤ `poster_client.py`)
- –î–∞–Ω–Ω—ã–µ –∏–∑ `shift_closings` –∑–∞ —Å–µ–≥–æ–¥–Ω—è (—Ñ–∞–∫—Ç –æ–±–æ–∏—Ö –æ—Ç–¥–µ–ª–æ–≤ ‚Äî —É–∂–µ –≤ –ë–î)

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**

1. **–ù–æ–≤—ã–π endpoint:** `GET /api/shift-closing/reconciliation`
   - –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ (Pizzburg, Cafe): `finance.getAccounts` ‚Üí –±–∞–ª–∞–Ω—Å—ã —Å—á–µ—Ç–æ–≤
   - –ú–∞–ø–ø–∏–Ω–≥ ID —Å—á–µ—Ç–æ–≤: 1=Kaspi, 2=Halyk, 4=–ù–∞–ª–∏—á–Ω—ã–µ (–∏–∑ CLAUDE.md)
   - –§–∞–∫—Ç –±–µ—Ä—ë—Ç—Å—è –∏–∑ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö `shift_closings` –∑–∞ —Å–µ–≥–æ–¥–Ω—è
   - –†–∞—Å—á—ë—Ç —Ä–∞–∑–Ω–∏—Ü—ã: Poster –±–∞–ª–∞–Ω—Å vs —Ñ–∞–∫—Ç

2. **UI:** –ù–æ–≤—ã–π –±–ª–æ–∫ –≤ `shift_closing.html`
   - –¢–∞–±–ª–∏—Ü–∞: —Å—á—ë—Ç √ó –∑–∞–≤–µ–¥–µ–Ω–∏–µ √ó –∏—Ç–æ–≥–æ
   - –§–∞–∫—Ç vs Poster —Å —Ü–≤–µ—Ç–æ–≤–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π
   - –ó–µ–ª—ë–Ω—ã–π ‚Äî —Å–æ–≤–ø–∞–¥–∞–µ—Ç (—Ä–∞–∑–Ω–∏—Ü–∞ < 1000‚Ç∏), –∂—ë–ª—Ç—ã–π ‚Äî –Ω–µ–±–æ–ª—å—à–∞—è —Ä–∞–∑–Ω–∏—Ü–∞, –∫—Ä–∞—Å–Ω—ã–π ‚Äî –±–æ–ª—å—à–∞—è

---

## –ü–æ—Ä—è–¥–æ–∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –§–∞–∑—ã 2

### –®–∞–≥ 1: Endpoint –¥–ª—è —á–µ–∫–æ–≤
1. –ú–µ—Ç–æ–¥ `get_receipts(date)` –≤ `poster_client.py` (–æ–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ `dash.getTransactions`)
2. Endpoint `GET /api/shift-closing/receipts` –≤ `web_app.py`
3. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: —Å–ø–∏—Å–æ–∫ —á–µ–∫–æ–≤ —Å id, –≤—Ä–µ–º—è, —Å—É–º–º–∞, cash, card

### –®–∞–≥ 2: UI –ø–æ–º–æ—â–Ω–∏–∫–∞ –±–µ–∑–Ω–∞–ª–∞
1. –ë–ª–æ–∫ –≤ `shift_closing.html` ‚Äî –∫–Ω–æ–ø–∫–∞ "–†–∞–∑–æ–±—Ä–∞—Ç—å" + —Ç–∞–±–ª–∏—Ü–∞ —á–µ–∫–æ–≤
2. –§–∏–ª—å—Ç—Ä—ã: –≤—Å–µ / –Ω–∞–ª–∏—á–Ω—ã–µ / –∫–∞—Ä—Ç–∞
3. –ò—Ç–æ–≥–æ –ø–æ –º–µ—Ç–æ–¥–∞–º –æ–ø–ª–∞—Ç—ã

### –®–∞–≥ 3: Endpoint –¥–ª—è —Å–≤–µ—Ä–∫–∏
1. Endpoint `GET /api/shift-closing/reconciliation` –≤ `web_app.py`
2. –ü–æ–ª—É—á–∞–µ—Ç –±–∞–ª–∞–Ω—Å—ã –∏–∑ `finance.getAccounts` –æ–±–æ–∏—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤
3. –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ `shift_closings`

### –®–∞–≥ 4: UI —Å–≤–µ—Ä–∫–∏
1. –ë–ª–æ–∫ "–°–≤–µ—Ä–∫–∞ —Å—á–µ—Ç–æ–≤" –≤ `shift_closing.html`
2. –¢–∞–±–ª–∏—Ü–∞ —Å—á–µ—Ç–æ–≤ √ó –∑–∞–≤–µ–¥–µ–Ω–∏–π
3. –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è —Ä–∞–∑–Ω–∏—Ü—ã

---

## –û—Ç–∫—Ä—ã—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã

1. **–î–æ—Å—Ç–∞–≤–∫–∞:** –ö–∞–∫ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∑–∞–∫–∞–∑—ã –Ω–∞ –¥–æ—Å—Ç–∞–≤–∫—É –≤ Poster API –¥–ª—è –Ω–∞–¥–±–∞–≤–∫–∏ –∫–∞—Å—Å–∏—Ä–∞?
2. **–ó–∞—Ä–ø–ª–∞—Ç—ã –ö–∞—Ñ–µ:** –ï—Å—Ç—å –ª–∏ —Ç–∞–±–ª–∏—Ü–∞ –Ω–æ—Ä–º –¥–ª—è —Å—É—à–∏—Å—Ç–∞/–∫–∞—Å—Å–∏—Ä–∞ –ö–∞—Ñ–µ?
3. **–î–µ—Ç–∞–ª–∏ —á–µ–∫–æ–≤:** –ù—É–∂–Ω–æ –ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–≤–∞—Ä—ã –≤–Ω—É—Ç—Ä–∏ —á–µ–∫–∞, –∏–ª–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –Ω–æ–º–µ—Ä + —Å—É–º–º–∞ + –º–µ—Ç–æ–¥ –æ–ø–ª–∞—Ç—ã?

---

## –ü—Ä–µ–¥—ã–¥—É—â–∏–µ —Ñ–∞–∑—ã (–∞—Ä—Ö–∏–≤)

<details>
<summary>–§–∞–∑–∞ 3-5: –ö–∞—Ñ–µ wizard, –ø–æ–º–æ—â–Ω–∏–∫ –±–µ–∑–Ω–∞–ª–∞, —Å–≤–µ—Ä–∫–∞ (–±—É–¥—É—â–µ–µ)</summary>

### –§–∞–∑–∞ 3: –ö–∞—Ñ–µ –∫–∞–∫ —à–∞–≥ wizard'–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞
- `CafeClosingStep.tsx` ‚Äî —Ñ–æ—Ä–º–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –ö–∞—Ñ–µ –≤ Mini App
- –°–≤—è–∑—å –ö–∞—Ñ–µ ‚Üí –æ—Å–Ω–æ–≤–Ω–æ–π (–∞–≤—Ç–æ–ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ kaspi_cafe)
- –ó–∞—Ä–ø–ª–∞—Ç—ã –ö–∞—Ñ–µ –≤ —Ç–æ–º –∂–µ —à–∞–≥–µ

### –§–∞–∑–∞ 4: –ù–∞–¥–±–∞–≤–∫–∞ –∫–∞—Å—Å–∏—Ä–∞ –∑–∞ –¥–æ—Å—Ç–∞–≤–∫—É
- 100‚Ç∏ √ó –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤ –Ω–∞ –¥–æ—Å—Ç–∞–≤–∫—É
- –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ —á–µ—Ä–µ–∑ Poster API

</details>
