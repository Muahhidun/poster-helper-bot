# –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å gRPC –Ω–∞ Railway

## –ü—Ä–æ–±–ª–µ–º–∞
```
ImportError: libstdc++.so.6: cannot open shared object file: No such file or directory
```

–ú–æ–¥—É–ª—å gRPC (—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è Google Cloud Document AI) –Ω–µ –º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ —Å–∏—Å—Ç–µ–º–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É C++.

## –¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ (–≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

### –ü–æ–ø—ã—Ç–∫–∞ 1: nix –ø–∞–∫–µ—Ç—ã ‚ùå
```toml
[phases.setup]
nixPkgs = ["gcc", "glibc", "libcxx"]
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ù–µ –ø–æ–º–æ–≥–ª–æ

### –ü–æ–ø—ã—Ç–∫–∞ 2: apt –ø–∞–∫–µ—Ç—ã ‚è≥ (—Ç–µ–∫—É—â–∞—è)
```toml
[phases.setup]
nixPkgs = ["python311", "python311Packages.pip", "python311Packages.virtualenv", "nodejs-18_x", "npm-9_x"]
aptPkgs = ["libstdc++6", "g++", "gcc"]
```
**–°—Ç–∞—Ç—É—Å**: –ñ–¥–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–µ–ø–ª–æ—è

## –†–µ–∑–µ—Ä–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### –ü–ª–∞–Ω –ë: –ü—Ä–µ–¥–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ wheel –ø–∞–∫–µ—Ç—ã

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å grpcio –∏–∑ wheel –≤–º–µ—Å—Ç–æ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤:

**requirements.txt:**
```python
# –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–¥ google-cloud-documentai
grpcio==1.60.0  # –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–µ–¥–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π wheel
```

### –ü–ª–∞–Ω –í: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ GPT-4 Vision

–ï—Å–ª–∏ Google Cloud Document AI –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ GPT-4 Vision –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö.

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ bot.py (—Å—Ç—Ä–æ–∫–∏ ~1197-1270):**

1. –£–±—Ä–∞—Ç—å –∏–º–ø–æ—Ä—Ç Document AI:
```python
# –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å
# import invoice_ocr
```

2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä—è–º–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ GPT-4 Vision:
```python
# –í–º–µ—Å—Ç–æ invoice_ocr.recognize_invoice_from_url(file_url)
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä—è–º–æ–π –≤—ã–∑–æ–≤ OpenAI API
```

**–ü–ª—é—Å—ã:**
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ C++
- –†–∞–±–æ—Ç–∞–µ—Ç –≤–µ–∑–¥–µ –≥–¥–µ –µ—Å—Ç—å Python
- –ë—ã—Å—Ç—Ä–µ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–µ—Ç—Å—è

**–ú–∏–Ω—É—Å—ã:**
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–Ω–µ–µ —Ç–æ—á–Ω—ã–º –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö
- –î–æ—Ä–æ–∂–µ (—Ç–æ–ª—å–∫–æ GPT-4, –±–µ–∑ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ OCR)

### –ü–ª–∞–Ω –ì: Docker –≤–º–µ—Å—Ç–æ Nixpacks

–°–æ–∑–¥–∞—Ç—å Dockerfile —Å –ø–æ–ª–Ω—ã–º –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –Ω–∞–¥ —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏.

**Dockerfile:**
```dockerfile
FROM python:3.11-slim

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
RUN apt-get update && apt-get install -y \
    libstdc++6 \
    g++ \
    gcc \
    nodejs \
    npm \
    && rm -rf /var/lib/apt/lists/*

WORKDIR /app

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Node.js –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
COPY mini_app/package*.json ./mini_app/
RUN cd mini_app && npm install

# –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
COPY . .

# –°–æ–±—Ä–∞—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
RUN cd mini_app && npm run build

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç
CMD ["python", "start_server.py"]
```

**Railway –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
- –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ Railway —É–¥–∞–ª–∏—Ç—å nixpacks.toml
- Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç Dockerfile

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—à–µ–Ω–∏—è

–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ:

1. **–õ–æ–≥–∏ –∑–∞–ø—É—Å–∫–∞** - –µ—Å—Ç—å –ª–∏ –æ—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–∞:
```
2025-11-07 XX:XX:XX - __main__ - INFO - ‚úÖ Configuration validated
2025-11-07 XX:XX:XX - __main__ - INFO - ü§ñ Poster Helper Bot starting...
```

2. **–û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ç–æ** –±–æ—Ç—É:
```
üì∏ –†–∞—Å–ø–æ–∑–Ω–∞—é —Ñ–æ—Ç–æ...
ü§ñ –†–∞—Å–ø–æ–∑–Ω–∞—é –Ω–∞–∫–ª–∞–¥–Ω—É—é (Document AI OCR + GPT-4)...
```

3. **–õ–æ–≥–∏ –æ—à–∏–±–æ–∫** - –µ—Å–ª–∏ –≤—Å—ë –µ—â–µ –ø–∞–¥–∞–µ—Ç:
```
ImportError: libstdc++.so.6: cannot open shared object file
```

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã

–ï—Å–ª–∏ –µ—Å—Ç—å SSH –¥–æ—Å—Ç—É–ø –∫ Railway:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
ldconfig -p | grep libstdc++

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã
dpkg -l | grep libstdc++

# –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å grpc
python3 -c "import grpc; print('‚úÖ grpc works')"
```

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ï—Å–ª–∏ –Ω–∏ –æ–¥–Ω–æ —Ä–µ—à–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –°–∫–∏–Ω—å—Ç–µ –ø–æ–ª–Ω—ã–µ –ª–æ–≥–∏ Railway (–≤–∫–ª—é—á–∞—è —ç—Ç–∞–ø build)
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ü–ª–∞–Ω –í (—Ç–æ–ª—å–∫–æ GPT-4 Vision)
3. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ü–ª–∞–Ω –ì (Dockerfile)
